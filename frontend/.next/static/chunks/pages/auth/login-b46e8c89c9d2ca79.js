(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{163:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return t(7254)}])},7254:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return w}});var s=t(5893),r=t(7294),n=t(6190),i=t(1163),o=t(7536),c=t(6312),l=t(3448),d=t(1664),u=t.n(d),p=t(8070),m=t(4665),h=t(6609),g=t(6501);let y=l.Ry({email:l.Z_().email("Invalid email address"),password:l.Z_().min(6,"Password must be at least 6 characters")});function x(){let e=(0,i.useRouter)(),[a,t]=(0,r.useState)(!1),n=(0,m.t)(e=>e.login),{register:l,handleSubmit:d,formState:{errors:x}}=(0,o.cI)({resolver:(0,c.F)(y)}),w=async a=>{t(!0);try{let t=await p.iJ.login(a);n(t.user,t.token),g.ZP.success("Login successful!");let s=e.query.redirect;e.push(s||"/")}catch(e){var s,r;g.ZP.error((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)||"Login failed")}finally{t(!1)}};return(0,s.jsxs)("form",{onSubmit:d(w),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label-field",children:"Email"}),(0,s.jsx)("input",{type:"email",...l("email"),className:"input-field",placeholder:"your@email.com"}),x.email&&(0,s.jsx)("p",{className:"error-message",children:x.email.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label-field",children:"Password"}),(0,s.jsx)("input",{type:"password",...l("password"),className:"input-field",placeholder:"••••••••"}),x.password&&(0,s.jsx)("p",{className:"error-message",children:x.password.message})]}),(0,s.jsx)(h.Z,{type:"submit",isLoading:a,className:"w-full",size:"lg",children:"Login"}),(0,s.jsxs)("p",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",(0,s.jsx)(u(),{href:"/auth/register",className:"text-brown-600 hover:text-brown-700 font-medium",children:"Register here"})]})]})}function w(){return(0,s.jsx)(n.Z,{title:"Login - Yarnitt",children:(0,s.jsx)("div",{className:"max-w-md mx-auto px-4 py-16",children:(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Welcome Back"}),(0,s.jsx)(x,{})]})})})}},6609:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});var s=t(5893);t(7294);var r=t(4777);function n(e){let{variant:a="primary",size:t="md",isLoading:n=!1,className:i,children:o,disabled:c,...l}=e;return(0,s.jsx)("button",{className:(0,r.cn)("rounded-button font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-brown-600 text-white hover:bg-brown-700",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300",outline:"border border-brown-600 text-brown-600 hover:bg-brown-50"}[a],{sm:"px-3 py-1 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[t],i),disabled:c||n,...l,children:n?(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsx)("div",{className:"loading-spinner h-5 w-5"})}):o})}},8070:function(e,a,t){"use strict";t.d(a,{fi:function(){return o},g8:function(){return l},iJ:function(){return i},kn:function(){return c}});var s=t(7066),r=t(4777);let n=s.Z.create({baseURL:"http://localhost:4000",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let a=(0,r.bW)();return a&&(e.headers.Authorization="Bearer ".concat(a)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var a;return(null===(a=e.response)||void 0===a?void 0:a.status)===401&&((0,r.H6)(),window.location.href="/auth/login"),Promise.reject(e)});let i={login:async e=>(await n.post("/api/auth/login",e)).data,register:async e=>(await n.post("/api/auth/register",e)).data,logout:async()=>{(0,r.H6)()}},o={getAll:async e=>(await n.get("/products",{params:e})).data,getById:async e=>(await n.get("/products/".concat(e))).data,getBySeller:async e=>(await n.get("/products/seller/".concat(e))).data},c={create:async e=>(await n.post("/api/orders",e)).data,getBuyerOrders:async()=>(await n.get("/api/orders/buyer")).data,getById:async e=>(await n.get("/api/orders/".concat(e))).data,cancelOrder:async e=>(await n.patch("/api/orders/".concat(e,"/cancel"))).data},l={getById:async e=>(await n.get("/api/users/".concat(e))).data,updateProfile:async(e,a)=>(await n.patch("/api/users/".concat(e),a)).data}}},function(e){e.O(0,[843,66,154,479,888,774,179],function(){return e(e.s=163)}),_N_E=e.O()}]);