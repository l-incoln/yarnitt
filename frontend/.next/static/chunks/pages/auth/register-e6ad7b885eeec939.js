(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{6659:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/register",function(){return s(8570)}])},8570:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return w}});var r=s(5893),t=s(7294),n=s(6190),l=s(1163),i=s(7536),c=s(6312),o=s(3448),d=s(1664),u=s.n(d),m=s(8070),p=s(4665),h=s(6609),x=s(6501);let g=o.Ry({name:o.Z_().min(2,"Name must be at least 2 characters"),email:o.Z_().email("Invalid email address"),password:o.Z_().min(6,"Password must be at least 6 characters"),confirmPassword:o.Z_(),role:o.Km(["buyer","seller"])}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function f(){let e=(0,l.useRouter)(),[a,s]=(0,t.useState)(!1),n=(0,p.t)(e=>e.login),{register:o,handleSubmit:d,formState:{errors:f}}=(0,i.cI)({resolver:(0,c.F)(g),defaultValues:{role:"buyer"}}),w=async a=>{s(!0);try{let{confirmPassword:s,...r}=a,t=await m.iJ.register(r);n(t.user,t.token),x.ZP.success("Registration successful!"),e.push("/")}catch(e){var r,t;x.ZP.error((null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)||"Registration failed")}finally{s(!1)}};return(0,r.jsxs)("form",{onSubmit:d(w),className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label-field",children:"Name"}),(0,r.jsx)("input",{type:"text",...o("name"),className:"input-field",placeholder:"John Doe"}),f.name&&(0,r.jsx)("p",{className:"error-message",children:f.name.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label-field",children:"Email"}),(0,r.jsx)("input",{type:"email",...o("email"),className:"input-field",placeholder:"your@email.com"}),f.email&&(0,r.jsx)("p",{className:"error-message",children:f.email.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label-field",children:"Password"}),(0,r.jsx)("input",{type:"password",...o("password"),className:"input-field",placeholder:"••••••••"}),f.password&&(0,r.jsx)("p",{className:"error-message",children:f.password.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label-field",children:"Confirm Password"}),(0,r.jsx)("input",{type:"password",...o("confirmPassword"),className:"input-field",placeholder:"••••••••"}),f.confirmPassword&&(0,r.jsx)("p",{className:"error-message",children:f.confirmPassword.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"label-field",children:"I want to:"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"radio",value:"buyer",...o("role"),className:"text-brown-600 focus:ring-brown-600"}),(0,r.jsx)("span",{className:"text-sm",children:"Buy handmade goods"})]}),(0,r.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"radio",value:"seller",...o("role"),className:"text-brown-600 focus:ring-brown-600"}),(0,r.jsx)("span",{className:"text-sm",children:"Sell my handmade goods"})]})]}),f.role&&(0,r.jsx)("p",{className:"error-message",children:f.role.message})]}),(0,r.jsx)(h.Z,{type:"submit",isLoading:a,className:"w-full",size:"lg",children:"Register"}),(0,r.jsxs)("p",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",(0,r.jsx)(u(),{href:"/auth/login",className:"text-brown-600 hover:text-brown-700 font-medium",children:"Login here"})]})]})}function w(){return(0,r.jsx)(n.Z,{title:"Register - Yarnitt",children:(0,r.jsx)("div",{className:"max-w-md mx-auto px-4 py-16",children:(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Create Account"}),(0,r.jsx)(f,{})]})})})}},6609:function(e,a,s){"use strict";s.d(a,{Z:function(){return n}});var r=s(5893);s(7294);var t=s(4777);function n(e){let{variant:a="primary",size:s="md",isLoading:n=!1,className:l,children:i,disabled:c,...o}=e;return(0,r.jsx)("button",{className:(0,t.cn)("rounded-button font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-brown-600 text-white hover:bg-brown-700",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300",outline:"border border-brown-600 text-brown-600 hover:bg-brown-50"}[a],{sm:"px-3 py-1 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[s],l),disabled:c||n,...o,children:n?(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"loading-spinner h-5 w-5"})}):i})}},8070:function(e,a,s){"use strict";s.d(a,{fi:function(){return i},g8:function(){return o},iJ:function(){return l},kn:function(){return c}});var r=s(7066),t=s(4777);let n=r.Z.create({baseURL:"http://localhost:4000",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let a=(0,t.bW)();return a&&(e.headers.Authorization="Bearer ".concat(a)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var a;return(null===(a=e.response)||void 0===a?void 0:a.status)===401&&((0,t.H6)(),window.location.href="/auth/login"),Promise.reject(e)});let l={login:async e=>(await n.post("/api/auth/login",e)).data,register:async e=>(await n.post("/api/auth/register",e)).data,logout:async()=>{(0,t.H6)()}},i={getAll:async e=>(await n.get("/products",{params:e})).data,getById:async e=>(await n.get("/products/".concat(e))).data,getBySeller:async e=>(await n.get("/products/seller/".concat(e))).data},c={create:async e=>(await n.post("/api/orders",e)).data,getBuyerOrders:async()=>(await n.get("/api/orders/buyer")).data,getById:async e=>(await n.get("/api/orders/".concat(e))).data,cancelOrder:async e=>(await n.patch("/api/orders/".concat(e,"/cancel"))).data},o={getById:async e=>(await n.get("/api/users/".concat(e))).data,updateProfile:async(e,a)=>(await n.patch("/api/users/".concat(e),a)).data}}},function(e){e.O(0,[843,66,154,479,888,774,179],function(){return e(e.s=6659)}),_N_E=e.O()}]);