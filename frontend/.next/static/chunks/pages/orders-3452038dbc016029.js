(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{131:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/orders",function(){return a(8905)}])},3156:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(3759).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},8905:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var s=a(5893),r=a(7294),n=a(1163),c=a(3934),i=a(1664),d=a.n(i),o=a(6190),l=a(1318),u=a(4665),h=a(8070),p=a(4777),x=a(3156);function m(){let e=(0,n.useRouter)(),t=(0,u.t)(e=>e.isAuthenticated);(0,r.useEffect)(()=>{t||e.push("/auth/login?redirect=/orders")},[t,e]);let{data:a,isLoading:i}=(0,c.a)({queryKey:["orders","buyer"],queryFn:()=>h.kn.getBuyerOrders(),enabled:t});return t?(0,s.jsx)(o.Z,{title:"My Orders - Yarnitt",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"My Orders"}),i?(0,s.jsx)(l.Z,{text:"Loading orders..."}):a&&a.length>0?(0,s.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,s.jsx)(d(),{href:"/orders/".concat(e._id),children:(0,s.jsx)("div",{className:"card hover:shadow-hover transition-shadow cursor-pointer",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,s.jsx)(x.Z,{size:20,className:"text-brown-600"}),(0,s.jsxs)("span",{className:"font-medium",children:["Order #",e.orderNumber]}),(0,s.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat((0,p.OY)(e.status)),children:e.status})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Placed on ",(0,p.p6)(e.createdAt)]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[e.items.length," item(s)"]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)("p",{className:"font-bold text-lg text-brown-700",children:(0,p.T4)(e.total)})})]})})},e._id))}):(0,s.jsxs)("div",{className:"card text-center py-12",children:[(0,s.jsx)(x.Z,{size:64,className:"mx-auto text-gray-400 mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"No orders yet"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"You haven't placed any orders yet. Start shopping to see your orders here!"}),(0,s.jsx)("button",{onClick:()=>e.push("/shop"),className:"btn-primary",children:"Start Shopping"})]})]})}):null}},1318:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(5893);function r(e){let{size:t="md",text:a}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)("div",{className:"loading-spinner ".concat({sm:"h-8 w-8",md:"h-12 w-12",lg:"h-16 w-16"}[t])}),a&&(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:a})]})}a(7294)},8070:function(e,t,a){"use strict";a.d(t,{fi:function(){return i},g8:function(){return o},iJ:function(){return c},kn:function(){return d}});var s=a(7066),r=a(4777);let n=s.Z.create({baseURL:"http://localhost:4000",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=(0,r.bW)();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&((0,r.H6)(),window.location.href="/auth/login"),Promise.reject(e)});let c={login:async e=>(await n.post("/api/auth/login",e)).data,register:async e=>(await n.post("/api/auth/register",e)).data,logout:async()=>{(0,r.H6)()}},i={getAll:async e=>(await n.get("/products",{params:e})).data,getById:async e=>(await n.get("/products/".concat(e))).data,getBySeller:async e=>(await n.get("/products/seller/".concat(e))).data},d={create:async e=>(await n.post("/api/orders",e)).data,getBuyerOrders:async()=>(await n.get("/api/orders/buyer")).data,getById:async e=>(await n.get("/api/orders/".concat(e))).data,cancelOrder:async e=>(await n.patch("/api/orders/".concat(e,"/cancel"))).data},o={getById:async e=>(await n.get("/api/users/".concat(e))).data,updateProfile:async(e,t)=>(await n.patch("/api/users/".concat(e),t)).data}}},function(e){e.O(0,[843,66,934,479,888,774,179],function(){return e(e.s=131)}),_N_E=e.O()}]);