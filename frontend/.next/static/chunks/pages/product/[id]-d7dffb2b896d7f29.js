(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[360],{8871:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[id]",function(){return s(5079)}])},7818:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(3759).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},4270:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(3759).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},116:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(3759).Z)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]])},5079:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(5893),r=s(7294),n=s(1163),c=s(3934),i=s(6190),l=s(1664),o=s.n(l),d=s(116),u=s(7818),x=s(4270),h=s(7865),m=s(4777),p=s(5536),f=s(6609),j=s(6501);function g(e){var t,s;let{product:n}=e,[c,i]=(0,r.useState)(1),l=(0,p.x)(e=>e.addItem),g=(null===(s=n.images)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.url)||"/images/placeholder.jpg",b="string"==typeof n.seller?n.seller:n.seller._id,y="object"==typeof n.seller?n.seller.shopName||n.seller.name:"Seller";return(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"bg-gray-100 rounded-card overflow-hidden aspect-square",children:(0,a.jsx)("img",{src:g,alt:n.name,className:"w-full h-full object-cover"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:n.name}),(0,a.jsx)("div",{className:"text-3xl font-bold text-brown-700 mb-6",children:(0,m.T4)(n.price)}),(0,a.jsxs)(o(),{href:"/seller/".concat(b),className:"flex items-center space-x-2 text-gray-600 hover:text-brown-600 mb-6",children:[(0,a.jsx)(d.Z,{size:20}),(0,a.jsxs)("span",{children:["Sold by: ",y]})]}),(0,a.jsx)("div",{className:"mb-6",children:n.stock>0?(0,a.jsxs)("span",{className:"text-green-600 font-medium",children:["In Stock (",n.stock," available)"]}):(0,a.jsx)("span",{className:"text-red-600 font-medium",children:"Out of Stock"})}),n.description&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"font-semibold text-lg mb-2",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-line",children:n.description})]}),n.stock>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"label-field",children:"Quantity"}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-button",children:[(0,a.jsx)("button",{onClick:()=>{c>1&&i(c-1)},className:"p-2 hover:bg-gray-100",disabled:c<=1,children:(0,a.jsx)(u.Z,{size:20})}),(0,a.jsx)("span",{className:"px-4 font-medium",children:c}),(0,a.jsx)("button",{onClick:()=>{c<n.stock&&i(c+1)},className:"p-2 hover:bg-gray-100",disabled:c>=n.stock,children:(0,a.jsx)(x.Z,{size:20})})]})})]}),(0,a.jsxs)(f.Z,{onClick:()=>{l(n,c),j.ZP.success("Added ".concat(c," item(s) to cart!"))},disabled:0===n.stock,className:"w-full flex items-center justify-center space-x-2",size:"lg",children:[(0,a.jsx)(h.Z,{size:20}),(0,a.jsx)("span",{children:"Add to Cart"})]}),(0,a.jsxs)("div",{className:"mt-8 space-y-2 text-sm text-gray-600",children:[(0,a.jsx)("p",{children:"• Handmade with love in Kenya"}),(0,a.jsx)("p",{children:"• Each item is unique"}),(0,a.jsx)("p",{children:"• Supports local artisans"})]})]})]})}var b=s(1821),y=s(1318),v=s(8070);function N(){let e=(0,n.useRouter)(),{id:t}=e.query,{data:s,isLoading:r,error:l}=(0,c.a)({queryKey:["product",t],queryFn:()=>v.fi.getById(t),enabled:!!t}),{data:o}=(0,c.a)({queryKey:["products","related"],queryFn:()=>v.fi.getAll({limit:4}),enabled:!!s});return r?(0,a.jsx)(i.Z,{children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,a.jsx)(y.Z,{text:"Loading product..."})})}):l||!s?(0,a.jsx)(i.Z,{children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"card text-center py-12",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Product Not Found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"The product you're looking for doesn't exist."}),(0,a.jsx)("button",{onClick:()=>e.push("/shop"),className:"btn-primary",children:"Back to Shop"})]})})}):(0,a.jsx)(i.Z,{title:"".concat(s.name," - Yarnitt"),children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsx)(g,{product:s}),o&&o.length>0&&(0,a.jsxs)("section",{className:"mt-16",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"You Might Also Like"}),(0,a.jsx)(b.Z,{products:o})]})]})})}},6609:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(5893);s(7294);var r=s(4777);function n(e){let{variant:t="primary",size:s="md",isLoading:n=!1,className:c,children:i,disabled:l,...o}=e;return(0,a.jsx)("button",{className:(0,r.cn)("rounded-button font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-brown-600 text-white hover:bg-brown-700",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300",outline:"border border-brown-600 text-brown-600 hover:bg-brown-50"}[t],{sm:"px-3 py-1 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[s],c),disabled:l||n,...o,children:n?(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)("div",{className:"loading-spinner h-5 w-5"})}):i})}},1318:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(5893);function r(e){let{size:t="md",text:s}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,a.jsx)("div",{className:"loading-spinner ".concat({sm:"h-8 w-8",md:"h-12 w-12",lg:"h-16 w-16"}[t])}),s&&(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:s})]})}s(7294)},1821:function(e,t,s){"use strict";s.d(t,{Z:function(){return u}});var a=s(5893);s(7294);var r=s(1664),n=s.n(r),c=s(7865),i=s(4777),l=s(5536),o=s(6501);function d(e){var t,s;let{product:r}=e,d=(0,l.x)(e=>e.addItem),u=(null===(s=r.images)||void 0===s?void 0:null===(t=s[0])||void 0===t?void 0:t.url)||"/images/placeholder.jpg";return(0,a.jsx)(n(),{href:"/product/".concat(r._id),children:(0,a.jsxs)("div",{className:"product-card group cursor-pointer",children:[(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-md bg-gray-100 aspect-square",children:[(0,a.jsx)("img",{src:u,alt:r.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),0===r.stock&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-semibold",children:"Out of Stock"})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 truncate group-hover:text-brown-600 transition-colors",children:r.name}),(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-lg font-bold text-brown-700",children:(0,i.T4)(r.price)}),(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),d(r,1),o.ZP.success("Added to cart!")},disabled:0===r.stock,className:"p-2 bg-brown-600 text-white rounded-button hover:bg-brown-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Add to cart",children:(0,a.jsx)(c.Z,{size:18})})]}),r.stock>0&&r.stock<=5&&(0,a.jsxs)("p",{className:"text-xs text-orange-600 mt-1",children:["Only ",r.stock," left!"]})]})]})})}function u(e){let{products:t,emptyMessage:s="No products found"}=e;return 0===t.length?(0,a.jsx)("div",{className:"col-span-full flex flex-col items-center justify-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:s})}):(0,a.jsx)("div",{className:"product-grid",children:t.map(e=>(0,a.jsx)(d,{product:e},e._id))})}},8070:function(e,t,s){"use strict";s.d(t,{fi:function(){return i},g8:function(){return o},iJ:function(){return c},kn:function(){return l}});var a=s(7066),r=s(4777);let n=a.Z.create({baseURL:"http://localhost:4000",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=(0,r.bW)();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&((0,r.H6)(),window.location.href="/auth/login"),Promise.reject(e)});let c={login:async e=>(await n.post("/api/auth/login",e)).data,register:async e=>(await n.post("/api/auth/register",e)).data,logout:async()=>{(0,r.H6)()}},i={getAll:async e=>(await n.get("/products",{params:e})).data,getById:async e=>(await n.get("/products/".concat(e))).data,getBySeller:async e=>(await n.get("/products/seller/".concat(e))).data},l={create:async e=>(await n.post("/api/orders",e)).data,getBuyerOrders:async()=>(await n.get("/api/orders/buyer")).data,getById:async e=>(await n.get("/api/orders/".concat(e))).data,cancelOrder:async e=>(await n.patch("/api/orders/".concat(e,"/cancel"))).data},o={getById:async e=>(await n.get("/api/users/".concat(e))).data,updateProfile:async(e,t)=>(await n.patch("/api/users/".concat(e),t)).data}}},function(e){e.O(0,[843,66,934,479,888,774,179],function(){return e(e.s=8871)}),_N_E=e.O()}]);